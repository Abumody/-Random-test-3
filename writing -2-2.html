<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Writing 2 - Grade 11 Elective</title>

<script src="student-manager.js"></script>

<style>
body{
  font-family:"Segoe UI",Arial,sans-serif;
  background:linear-gradient(135deg,#f4f6fb,#e8ecf5);
  padding:30px;
  color:#2c3e50;
}

.container{
  max-width:1100px;
  margin:auto;
  background:#fff;
  padding:30px;
  border-radius:14px;
  box-shadow:0 12px 30px rgba(0,0,0,0.12);
}

.header{
  border-bottom:3px solid #1e3799;
  padding-bottom:15px;
  margin-bottom:25px;
}

.header h1{
  margin:0;
  color:#1e3799;
}

.marks{
  float:right;
  font-weight:bold;
}

.instructions{
  background:#f1f5ff;
  padding:15px;
  border-left:5px solid #1e3799;
  border-radius:8px;
  margin-bottom:20px;
  line-height:1.6;
}

textarea{
  width:100%;
  min-height:260px;
  padding:15px;
  font-size:15px;
  line-height:1.6;
  border-radius:10px;
  border:1px solid #ccc;
  resize:vertical;
}

.counter{
  margin-top:8px;
  font-weight:bold;
}

.counter span{color:#1e3799;}

.warning{color:#c0392b;font-weight:bold;margin-top:10px;}
.success{color:#27ae60;font-weight:bold;margin-top:10px;}

.submit-btn{
  margin-top:20px;
  width:100%;
  background:#27ae60;
  color:white;
  border:none;
  padding:14px;
  font-size:17px;
  border-radius:10px;
  cursor:pointer;
}

.submit-btn:disabled{
  background:#95a5a6;
  cursor:not-allowed;
}

/* TEACHER PANEL */
.teacher-panel{
  margin-top:40px;
  padding:20px;
  border:2px dashed #1e3799;
  border-radius:12px;
  background:#f9fbff;
}

.teacher-panel h3{
  margin-top:0;
  color:#1e3799;
}

.teacher-panel label{
  display:block;
  margin:10px 0 5px;
}

.teacher-panel input{
  width:100%;
  padding:8px;
  font-size:14px;
}

.total{
  margin-top:15px;
  font-size:18px;
  font-weight:bold;
}

.save-btn{
  margin-top:15px;
  background:#1e3799;
  color:white;
  border:none;
  padding:12px;
  width:100%;
  font-size:16px;
  border-radius:8px;
  cursor:pointer;
}

.action-buttons{
  margin-top:20px;
  display:flex;
  gap:15px;
  justify-content:center;
}

.action-buttons button{
  padding:10px 18px;
  border:none;
  border-radius:8px;
  font-size:15px;
  cursor:pointer;
}

.back-btn{background:#0984e3;color:white;}
.results-btn{background:#00b894;color:white;}
</style>
</head>

<body>

<div class="container">

<div class="header">
<h1>WRITING 2 <span class="marks">(10 marks)</span></h1>
</div>

<div class="instructions">
<p><strong>Complete the following task. Write at least <u>150 words</u>.</strong></p>
<p><strong>Situation:</strong> You are a citizen in a rural city and you are planning to start your own business which is 
‚ÄúOpening a small designing shop‚Äù.</p>
<p><strong>Task:</strong> Write a Formal letter/ an email to the Minister of Trade and Industry asking for a loan of 15,000 
OR to start the business. </p>
<p><strong>In your letter:</strong></p>
<p><strong>Explain why you want to start this business</strong></p>
<p><strong>What kind of services you would offer</strong></p>
<p><strong>How your business is special and distinguished </strong></p>
<p><strong>Your writing should be clear and organized </strong></p>
</div>

<textarea id="writing" placeholder="Write your formal letter or email here..."></textarea>

<div class="counter">
  Word count: <span id="count">0</span>
</div>

<div id="message"></div>

<button class="submit-btn" id="submitBtn" onclick="submitWriting()" disabled>
Submit Writing
</button>

<!-- TEACHER PANEL -->
<div class="teacher-panel">
<h3>Teacher Evaluation Panel</h3>

<label>Task Achievement ( /3 )</label>
<input type="number" id="task" min="0" max="3">

<label>Organisation ( /3 )</label>
<input type="number" id="org" min="0" max="3">

<label>Language ( /4 )</label>
<input type="number" id="lang" min="0" max="4">

<div class="total">
Total Score: <span id="total">0</span> / 10
</div>

<button class="save-btn" onclick="saveWriting2Score()">Save Writing Score</button>

<div class="action-buttons">
  <button class="back-btn" onclick="location.href='exam 2.html'">‚¨Ö Back to Sections</button>
  <button class="results-btn" onclick="location.href='results.html'">üìä View Results</button>
</div>

</div>

</div>

<script>
const textarea = document.getElementById("writing");
const countSpan = document.getElementById("count");
const submitBtn = document.getElementById("submitBtn");
const message = document.getElementById("message");

textarea.addEventListener("input", () => {
  let words = textarea.value.trim().split(/\s+/).filter(w => w !== "");
  let count = words.length;
  countSpan.textContent = count;

  if(count < 150){
    submitBtn.disabled = true;
    message.innerHTML = `<div class="warning">‚ùå Your writing must be at least 150 words.</div>`;
  }else{
    submitBtn.disabled = false;
    message.innerHTML = `<div class="success">‚úÖ Minimum word count reached.</div>`;
  }
});

function submitWriting(){
  textarea.disabled = true;
  submitBtn.disabled = true;
  message.innerHTML = `<div class="success">‚úî Your writing has been submitted for evaluation.</div>`;
}

/* ‚úÖ ÿØÿßŸÑÿ© ŸÖÿ≠ŸÑŸäÿ© ÿ®ÿßÿ≥ŸÖ ŸÖÿÆÿ™ŸÑŸÅ */
function saveWriting2Score(){
  let task = Number(document.getElementById("task").value) || 0;
  let org = Number(document.getElementById("org").value) || 0;
  let lang = Number(document.getElementById("lang").value) || 0;

  let total = task + org + lang;
  if(total > 10) total = 10;

  document.getElementById("total").textContent = total;

  /* ‚úÖ ÿßŸÑÿ±ÿ®ÿ∑ ÿßŸÑÿµÿ≠Ÿäÿ≠ ŸÖÿπ results */
  saveScore("writing2", total);

  alert("Writing score saved successfully.");
}
</script>

</body>
</html>
