<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Listening 2 - Grade 11 Elective</title>

<script src="student-manager.js"></script>

<style>
body{
    font-family:"Segoe UI",Arial,sans-serif;
    background:linear-gradient(135deg,#f4f6fb,#e8ecf5);
    padding:30px;
    color:#2c3e50;
}

.container{
    max-width:950px;
    margin:auto;
    background:#fff;
    padding:35px;
    border-radius:14px;
    box-shadow:0 12px 30px rgba(0,0,0,0.12);
}

.header{
    border-bottom:3px solid #1e3799;
    padding-bottom:15px;
    margin-bottom:25px;
}

.header h1{
    margin:0;
    color:#1e3799;
}

.marks{
    float:right;
    font-weight:bold;
}

.instructions{
    background:#f1f5ff;
    padding:15px;
    border-left:5px solid #1e3799;
    border-radius:8px;
    margin-bottom:25px;
}

.audio-box{
    text-align:center;
    margin-bottom:30px;
}

.audio-box button{
    background:#1e3799;
    color:#fff;
    border:none;
    padding:12px 26px;
    border-radius:8px;
    font-size:16px;
    cursor:pointer;
}

.audio-box button:hover{
    background:#163172;
}

.time{
    margin-top:8px;
    font-size:14px;
    color:#333;
}

.progress-container{
    width:100%;
    height:8px;
    background:#ddd;
    border-radius:4px;
    margin-top:10px;
    overflow:hidden;
}

.progress-bar{
    height:100%;
    width:0%;
    background:#1e3799;
}

.question{
    margin-bottom:20px;
}

.question p{
    font-weight:600;
}

input[type="text"]{
    width:100%;
    padding:10px;
    font-size:15px;
    border-radius:6px;
    border:1px solid #ccc;
}

.correct{
    border:2px solid #27ae60 !important;
    background:#eafaf1;
}

.wrong{
    border:2px solid #c0392b !important;
    background:#fdecea;
}

.submit-btn{
    margin-top:30px;
    width:100%;
    background:#27ae60;
    color:#fff;
    border:none;
    padding:16px;
    font-size:18px;
    border-radius:10px;
    cursor:pointer;
}

.submit-btn:hover{
    background:#1e8449;
}

.result-box{
    margin-top:25px;
    padding:18px;
    border-radius:10px;
    background:#f4fdf7;
    border:2px solid #27ae60;
    font-size:18px;
    text-align:center;
}

.action-buttons{
    margin-top:20px;
    display:flex;
    gap:15px;
    justify-content:center;
}

.action-buttons button{
    padding:12px 20px;
    border:none;
    border-radius:8px;
    font-size:15px;
    cursor:pointer;
}

.back-btn{
    background:#0984e3;
    color:white;
}

.results-btn{
    background:#00b894;
    color:white;
}
</style>
</head>

<body>

<div class="container">

<div class="header">
<h1>LISTENING 2 (Items 11â€“20) <span class="marks">(10 marks)</span></h1>
<p><strong>You are going to hear an interview with Anna Oliveria.</strong></p>
</div>

<div class="instructions">
<strong>Part One:</strong> For each item, write a short answer <em>(not more than four words)</em>.
</div>

<!-- AUDIO (Ù…Ø·Ø§Ø¨Ù‚ Listening 1) -->
<div class="audio-box">
<audio id="audio" src="Audio/business_interview.mp3"></audio>
<button id="playBtn">Play</button>

<div class="time">
<span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
</div>

<div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
</div>
</div>

<div class="question">
<p>11. What is the name of the app Anna created??</p>
<input type="text" id="q11">
</div>

<div class="question">
<p>12. What does the app help with?</p>
<input type="text" id="q12">
</div>

<div class="question">
<p>13. Why canâ€™t many parents help with homework?<br>Because</p>
<input type="text" id="q13">
</div>

<div class="question">
<p>14. What kind of tutors does the app connect students with?</p>
<input type="text" id="q14">
</div>

<div class="question">
<p>15. Why are tutoring prices lower through the app?</p>
<input type="text" id="q15">
</div>

<div class="question">
<p>16. What problem did Anna face with local tutors?</p>
<input type="text" id="q16">
</div>

<div class="instructions">
<strong>Part Two:</strong> For each item, complete the missing words <em>(not more than three words)</em>.
</div>

<div class="question">
<p>17. Parents may lack time or ________________ to help with homework.</p>
<input type="text" id="q17">
</div>

<div class="question">
<p>18.Tutors in remote areas can work ________________.</p>
<input type="text" id="q18">
</div>

<div class="question">
<p>19. Students can get live support from ________________ tutors.</p>
<input type="text" id="q19">
</div>

<div class="question">
<p>20. Anna hopes to expand the ________________ of services offered..</p>
<input type="text" id="q20">
</div>

<button class="submit-btn" onclick="finish()">Submit Listening 2</button>

<div id="result"></div>

</div>

<script>
/* ===== Audio Logic (Ù…Ø·Ø§Ø¨Ù‚ Listening 1) ===== */
const audio = document.getElementById("audio");
const playBtn = document.getElementById("playBtn");
const progressBar = document.getElementById("progressBar");
const currentTimeEl = document.getElementById("currentTime");
const totalTimeEl = document.getElementById("totalTime");

playBtn.onclick = function(){
    if(audio.paused){
        audio.play();
        playBtn.textContent = "Pause";
    }else{
        audio.pause();
        playBtn.textContent = "Play";
    }
};

audio.addEventListener("loadedmetadata", ()=>{
    totalTimeEl.textContent = formatTime(audio.duration);
});

audio.addEventListener("timeupdate", ()=>{
    currentTimeEl.textContent = formatTime(audio.currentTime);
    if(audio.duration){
        progressBar.style.width =
            (audio.currentTime / audio.duration * 100) + "%";
    }
});

audio.addEventListener("ended", ()=>{
    playBtn.textContent = "Play";
});

function formatTime(seconds){
    const m = Math.floor(seconds / 60);
    const s = Math.floor(seconds % 60);
    return m + ":" + (s < 10 ? "0" + s : s);
}

/* ========= ANSWER KEY ========= */
const answers = {
    q11: "HomeworX",
    q12: "Homework",
    q13: "No time",
    q14: "Pre-approved tutors",
    q15: "No travelling time",
    q16: "Expensive",
    q17: "knowledge",
    q18: "from home",
    q19: "online",
    q20: "range"
};

function normalize(text){
    return text.toLowerCase().trim();
}

function finish(){
    let correct = 0;
    let wrong = 0;

    for(let q in answers){
        let input = document.getElementById(q);
        let studentAnswer = normalize(input.value);
        let correctAnswer = normalize(answers[q]);

        if(studentAnswer === correctAnswer){
            correct++;
            input.classList.add("correct");
        }else{
            wrong++;
            input.classList.add("wrong");
        }
        input.disabled = true;
    }

    // Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø¬Ø© ÙˆØ±Ø¨Ø·Ù‡Ø§ Ù…Ø¹ results
    saveScore("listening2", correct);

    document.getElementById("result").innerHTML = `
        <div class="result-box">
            âœ” Correct answers: ${correct}<br>
            âœ– Wrong answers: ${wrong}<br>
            ðŸ§® Score: ${correct} / 10
            <div class="action-buttons">
                <button class="back-btn" onclick="location.href='exam1.html'">â¬… Back to Sections</button>
                <button class="results-btn" onclick="location.href='results.html'">ðŸ“Š View Results</button>
            </div>
        </div>
    `;
}
</script>

</body>
</html>
